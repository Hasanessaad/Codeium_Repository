const MongoClient = require('mongodb').MongoClient;

async function queryDB(collectionName, query) {
  const url = 'mongodb://localhost:27017';
  const dbName = 'myproject';

  const client = new MongoClient(url);
  try {
    await client.connect();
    console.log('Connected to the database');

    const db = client.db(dbName);
    const collection = db.collection(collectionName);

    const sanitizedQuery = JSON.parse(JSON.stringify(query).replace(/[\$\*\(\)\[\]\{\}]/g, ''));
    const result = await collection.find(sanitizedQuery).toArray();

    return result;
  } finally {
    await client.close();
  }
}
